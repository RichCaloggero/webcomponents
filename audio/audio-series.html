<!--<link rel="import" href="../polymer/lib/elements/dom-if.html">-->
<!--<link rel="import" href="../polymer/lib/elements/dom-repeat.html">-->

<dom-module id="audio-series">
<template>
<style>
:host {
display: block;
}
</style>

<div class="audio-series">
</div>

</template>

<script>
"use strict";

class AudioSeries extends _AudioContext_ {
static get is() { return "audio-series"; }

constructor () {
super ();
} // constructor

connectedCallback () {
this.whenAllChildrenLoaded (this.connectAll);
} // connectedCallback

connectAll (nodes) {
if (nodes.length < 2) return;
if (this._debugConnection) alert (`series: connecting all ${nodes.length} nodes`);

for (var i=0; i<nodes.length-1; i++) {
let e1 = nodes[i], e2 = nodes[i+1];
let n1 = e1._out|| e1.audioNode;
let n2 = e2._in || e2.audioNode;

if (this._debugConnection) alert (`series: connecting ${e1.audioNode === n1? e1.audioNode : n1} to ${n2 === e2.audioNode? e2.audioNode : n2}`);

if (typeof(AudioParallel) !== "undefined") {
if (n1 instanceof AudioParallel) n1 = n1._in;
if (n2 instanceof AudioParallel) n2 = n2._in;
} // if

n1.connect (n2);
} // for
} // connectAll

} // class AudioSeries

window.customElements.define(AudioSeries.is, AudioSeries);
</script>
</dom-module>
